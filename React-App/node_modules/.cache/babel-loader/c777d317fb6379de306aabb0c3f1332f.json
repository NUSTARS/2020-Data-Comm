{"ast":null,"code":"var _jsxFileName = \"/Users/Nathan/Desktop/data-comm-ui/src/selectPort.js\";\nimport React from 'react';\nimport Select from 'react-select';\nimport Button from '@material-ui/core/Button';\nimport { usePortState } from './globalState';\nconst {\n  port,\n  setPort\n} = usePortState(); // displayed on SETTINGS PANE\n\nclass SelectPort extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeFunc = selectedOption => {\n      this.setState({\n        selected: selectedOption.value\n      });\n      console.log(selectedOption.value); // add selected port to global store\n\n      setPort(selectedOption.value); // send selected port to flask background thread\n\n      fetch('/selected-port/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          port: selectedOption.value\n        })\n      }).then(response => response.json()).then(data => {\n        console.log('Send port to Flask:', data);\n      }).catch(error => {\n        console.error('Error in sending port:', error);\n      });\n    };\n\n    this.state = {\n      ports: [],\n      selected: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getPorts();\n  } // componentDidUpdate() {\n  // }\n\n\n  getPorts() {\n    fetch('/ports/').then(res => res.json()).then(data => {\n      var options = [];\n      data.ports.forEach(port => options.push({\n        value: port,\n        label: port\n      }));\n      this.setState({\n        ports: options\n      });\n    }, []);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Select, {\n      name: \"ports\" // value={val}\n      ,\n      options: this.state.ports,\n      className: \"basic-single\",\n      classNamePrefix: \"select\",\n      onChange: this.onChangeFunc,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      onClick: () => this.getPorts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, \"Refresh\"));\n  }\n\n}\n\nexport default SelectPort;","map":{"version":3,"sources":["/Users/Nathan/Desktop/data-comm-ui/src/selectPort.js"],"names":["React","Select","Button","usePortState","port","setPort","SelectPort","Component","constructor","props","onChangeFunc","selectedOption","setState","selected","value","console","log","fetch","method","headers","body","JSON","stringify","then","response","json","data","catch","error","state","ports","componentDidMount","getPorts","res","options","forEach","push","label","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,YAAT,QAA6B,eAA7B;AAEA,MAAM;AAACC,EAAAA,IAAD;AAAOC,EAAAA;AAAP,IAAkBF,YAAY,EAApC,C,CAEA;;AACA,MAAMG,UAAN,SAAyBN,KAAK,CAACO,SAA/B,CAAyC;AAEvCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SA6BnBC,YA7BmB,GA6BJC,cAAc,IAAI;AAC/B,WAAKC,QAAL,CAAc;AAACC,QAAAA,QAAQ,EAAEF,cAAc,CAACG;AAA1B,OAAd;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,cAAc,CAACG,KAA3B,EAF+B,CAI/B;;AACAT,MAAAA,OAAO,CAACM,cAAc,CAACG,KAAhB,CAAP,CAL+B,CAO/B;;AACAG,MAAAA,KAAK,CAAC,iBAAD,EAAoB;AACvBC,QAAAA,MAAM,EAAE,MADe;AAEvBC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFc;AAKvBC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAClB,UAAAA,IAAI,EAAEO,cAAc,CAACG;AAAtB,SAAf;AALiB,OAApB,CAAL,CAOCS,IAPD,CAOMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAPlB,EAQCF,IARD,CAQMG,IAAI,IAAI;AACZX,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCU,IAAnC;AACD,OAVD,EAWCC,KAXD,CAWQC,KAAD,IAAW;AAChBb,QAAAA,OAAO,CAACa,KAAR,CAAc,wBAAd,EAAwCA,KAAxC;AACD,OAbD;AAcD,KAnDkB;;AAEjB,SAAKC,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE,EADI;AAEXjB,MAAAA,QAAQ,EAAE;AAFC,KAAb;AAID;;AAEDkB,EAAAA,iBAAiB,GAAG;AAClB,SAAKC,QAAL;AACD,GAZsC,CAcvC;AACA;;;AAEAA,EAAAA,QAAQ,GAAG;AACTf,IAAAA,KAAK,CAAC,SAAD,CAAL,CAAiBM,IAAjB,CAAsBU,GAAG,IAAIA,GAAG,CAACR,IAAJ,EAA7B,EACGF,IADH,CACQG,IAAI,IAAI;AACZ,UAAIQ,OAAO,GAAG,EAAd;AACAR,MAAAA,IAAI,CAACI,KAAL,CAAWK,OAAX,CAAmB/B,IAAI,IAAI8B,OAAO,CAACE,IAAR,CACzB;AACEtB,QAAAA,KAAK,EAAEV,IADT;AAEEiC,QAAAA,KAAK,EAAEjC;AAFT,OADyB,CAA3B;AAMA,WAAKQ,QAAL,CAAc;AAACkB,QAAAA,KAAK,EAAEI;AAAR,OAAd;AACD,KAVH,EAUK,EAVL;AAWD;;AA0BDI,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AACE,MAAA,IAAI,EAAC,OADP,CAEE;AAFF;AAGE,MAAA,OAAO,EAAE,KAAKT,KAAL,CAAWC,KAHtB;AAIE,MAAA,SAAS,EAAC,cAJZ;AAKE,MAAA,eAAe,EAAC,QALlB;AAME,MAAA,QAAQ,EAAE,KAAKpB,YANjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eASE,oBAAC,MAAD;AACE,MAAA,OAAO,EAAC,WADV;AAEE,MAAA,OAAO,EAAG,MAAM,KAAKsB,QAFvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBATF,CADF;AAiBD;;AAzEsC;;AA4EzC,eAAe1B,UAAf","sourcesContent":["import React from 'react';\nimport Select from 'react-select';\nimport Button from '@material-ui/core/Button';\nimport { usePortState } from './globalState';\n\nconst {port, setPort} = usePortState();\n\n// displayed on SETTINGS PANE\nclass SelectPort extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      ports: [],\n      selected: ''\n    }\n  };\n\n  componentDidMount() {\n    this.getPorts();\n  }\n\n  // componentDidUpdate() {\n  // }\n\n  getPorts() {\n    fetch('/ports/').then(res => res.json())\n      .then(data => {\n        var options = [];\n        data.ports.forEach(port => options.push(\n          {\n            value: port,\n            label: port\n          }\n        ));\n        this.setState({ports: options});\n      }, []);\n  }\n\n  onChangeFunc = selectedOption => {\n    this.setState({selected: selectedOption.value});\n    console.log(selectedOption.value);\n\n    // add selected port to global store\n    setPort(selectedOption.value)\n\n    // send selected port to flask background thread\n    fetch('/selected-port/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({port: selectedOption.value}),\n    })\n    .then(response => response.json())\n    .then(data => {\n      console.log('Send port to Flask:', data);\n    })\n    .catch((error) => {\n      console.error('Error in sending port:', error);\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <Select\n          name=\"ports\"\n          // value={val}\n          options={this.state.ports}\n          className=\"basic-single\"\n          classNamePrefix=\"select\"\n          onChange={this.onChangeFunc}\n        />\n        <Button \n          variant=\"contained\" \n          onClick={(() => this.getPorts)}>\n            Refresh\n        </Button>\n      </div>\n    );\n  }\n}\n\nexport default SelectPort;"]},"metadata":{},"sourceType":"module"}